<html>

<head>
<meta http-equiv="Content-Language" content="zh-cn">
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<title>Player.lua函数语句</title>
</head>

<body>

<p><font face="Fixedsys"><font color="#0000FF"><b>Player.lua函数语句</b></font><br>
<br>
<META>
玩家登录<br>
&nbsp;&nbsp;function OnUserStart(PlayP, ...);<br>
<br>
玩家发言<br>
&nbsp;&nbsp;function OnUserSay(PlayP, ...);  ...用参数arg[1]..arg[9]获取<br>
<br>
玩家离线<br>
&nbsp;&nbsp;function OnUserEnd(PlayP, ...);<br>
<br>
玩家切换装备<br>
&nbsp;&nbsp;function OnChangeWearItem(PlayP);<br>
<br>
玩家输入框输入信息<br>
&nbsp;&nbsp;function OnInputString(CmdP, PlayP, ...); arg[1]是输入Id, arg[2]是输入字符<br>
<br>
玩家确认门武信息<br>
&nbsp;&nbsp;function OnConfirmGuildMagic(PlayP, MagicData);<br>
&nbsp;&nbsp;  return MagicData;
&nbsp;&nbsp;end;
以下表内容 支持修改返回<br>
MagicData = {MagicType=0, Shape=0, EffectColor=0, Speed=0, Recovery=0,  Accuracy=0,  KeepRecovery=0,  Avoid=0,  DamageBody=0,  DamageHead=0,  DamageArm=0,  DamageLeg=0,  ArmorBody=0,  ArmorHead=0,  ArmorArm=0,   ArmorLeg=0,  OutPower=0,  InPower=0,  MagicPower=0,  Life=0, };<br>
<br>
物品掉落提示<br>
&nbsp;&nbsp;function OnDropItem(PlayP, DropOwnerName, ItemData);<br>
&nbsp;&nbsp;  return ItemData --如果return 不带ItemData 就不修改
&nbsp;&nbsp;end
ItemData = {Name= '', ViewName = '', Count = 1, Shape=1, Color = 1, Sex = 1, UpGrade= 0, AddType =0, Kind = 4, EquipSet=0, boNotExchange=false, boNotDrop=false}
返回的是表时 支持修改以下表内容
ItemData = {Count= 0, ItemId= 0, UpGrade= 0, AddType= 0, BoAddAttrib=0}
<br>
玩家操作菜单返回 <br>
&nbsp;&nbsp;function OnGetResult(PlayP, ...);<br>
<br>
玩家被杀死<br>
&nbsp;&nbsp;function OnKilled(PlayP, ...); arg[1]是种族字符串, arg[2]是凶手名字<br>
<br>
玩家被点击<br>
&nbsp;&nbsp;function OnClick(PlayP, ...); arg[1]是点击字符串<br>
&nbsp;&nbsp;  return --如果返回字符串 就是点击显示的 否则按照传递的显示
&nbsp;&nbsp;end;
<br>
玩家显示<br>
&nbsp;&nbsp;function OnShow(PlayP, ...); arg[1]显示的名字<br>
&nbsp;&nbsp;  return --如果返回字符串 就改变了显示的名字
&nbsp;&nbsp;end;
<br>
门派被灭<br>
&nbsp;&nbsp;function OnGuildOver(PlayP, ...); arg[1]是门派名字<br>
<br>
怪物死亡<br>
&nbsp;&nbsp;function OnMonsterDie(MopP, PlayP, ...); arg[1]是怪物真名<br>
<br>
挑战完成<br>
&nbsp;&nbsp;function OnChallengOver(OwnerP, ChallengeP, ...); ChallengeP是挑战者 arg[1]是押金名字， arg[2]是押金数量<br>
<br>
拾取物品提示<br>
&nbsp;&nbsp;function OnPickUpItem(PlayP, PlayName, ItemData);<br>
<br>
改变武功<br>
&nbsp;&nbsp;function OnChangeMagic(MopP, PlayP, ...); arg[1]武功名字<br>


</META>
</body>

</html>
